<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>其他类型 | Tang&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/blog/TB5.PNG">
    <meta name="description" content="This is a blog.">
    
    <link rel="preload" href="/blog/assets/css/0.styles.389ed919.css" as="style"><link rel="preload" href="/blog/assets/js/app.96a63ad2.js" as="script"><link rel="preload" href="/blog/assets/js/2.e671b9b2.js" as="script"><link rel="preload" href="/blog/assets/js/3.be9bea65.js" as="script"><link rel="preload" href="/blog/assets/js/83.39a82281.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.6769ccf0.js"><link rel="prefetch" href="/blog/assets/js/11.46df150a.js"><link rel="prefetch" href="/blog/assets/js/12.e78943d6.js"><link rel="prefetch" href="/blog/assets/js/13.5d361c1d.js"><link rel="prefetch" href="/blog/assets/js/14.13534fd9.js"><link rel="prefetch" href="/blog/assets/js/15.b21fe2e3.js"><link rel="prefetch" href="/blog/assets/js/16.bf5062c1.js"><link rel="prefetch" href="/blog/assets/js/17.65346b85.js"><link rel="prefetch" href="/blog/assets/js/18.6fb1bdc2.js"><link rel="prefetch" href="/blog/assets/js/19.c6e110df.js"><link rel="prefetch" href="/blog/assets/js/20.4a33f06a.js"><link rel="prefetch" href="/blog/assets/js/21.28170e84.js"><link rel="prefetch" href="/blog/assets/js/22.9358a818.js"><link rel="prefetch" href="/blog/assets/js/23.136a0f54.js"><link rel="prefetch" href="/blog/assets/js/24.499aeaaf.js"><link rel="prefetch" href="/blog/assets/js/25.3cff72a1.js"><link rel="prefetch" href="/blog/assets/js/26.4ee8c52f.js"><link rel="prefetch" href="/blog/assets/js/27.6e099c82.js"><link rel="prefetch" href="/blog/assets/js/28.bfc3427b.js"><link rel="prefetch" href="/blog/assets/js/29.ce801df4.js"><link rel="prefetch" href="/blog/assets/js/30.724cfbb6.js"><link rel="prefetch" href="/blog/assets/js/31.ffd0a663.js"><link rel="prefetch" href="/blog/assets/js/32.feba734b.js"><link rel="prefetch" href="/blog/assets/js/33.e8d22227.js"><link rel="prefetch" href="/blog/assets/js/34.a12f435a.js"><link rel="prefetch" href="/blog/assets/js/35.31d4b272.js"><link rel="prefetch" href="/blog/assets/js/36.a6d04eab.js"><link rel="prefetch" href="/blog/assets/js/37.d8aae5c8.js"><link rel="prefetch" href="/blog/assets/js/38.2d9e0b46.js"><link rel="prefetch" href="/blog/assets/js/39.f9bd73de.js"><link rel="prefetch" href="/blog/assets/js/4.850a33ae.js"><link rel="prefetch" href="/blog/assets/js/40.5ef065c5.js"><link rel="prefetch" href="/blog/assets/js/41.014df883.js"><link rel="prefetch" href="/blog/assets/js/42.199ac029.js"><link rel="prefetch" href="/blog/assets/js/43.69e01de9.js"><link rel="prefetch" href="/blog/assets/js/44.b00eed2f.js"><link rel="prefetch" href="/blog/assets/js/45.f676a314.js"><link rel="prefetch" href="/blog/assets/js/46.d76b7b8a.js"><link rel="prefetch" href="/blog/assets/js/47.fa6622ba.js"><link rel="prefetch" href="/blog/assets/js/48.629ae724.js"><link rel="prefetch" href="/blog/assets/js/49.3f36b8cf.js"><link rel="prefetch" href="/blog/assets/js/5.c1ab3a44.js"><link rel="prefetch" href="/blog/assets/js/50.6429bdc0.js"><link rel="prefetch" href="/blog/assets/js/51.b7cb8687.js"><link rel="prefetch" href="/blog/assets/js/52.7360a167.js"><link rel="prefetch" href="/blog/assets/js/53.fb5fcabb.js"><link rel="prefetch" href="/blog/assets/js/54.f5ac5958.js"><link rel="prefetch" href="/blog/assets/js/55.592b0348.js"><link rel="prefetch" href="/blog/assets/js/56.d17f3acb.js"><link rel="prefetch" href="/blog/assets/js/57.11aeb3ed.js"><link rel="prefetch" href="/blog/assets/js/58.1b2f9f8b.js"><link rel="prefetch" href="/blog/assets/js/59.c5633b7a.js"><link rel="prefetch" href="/blog/assets/js/6.0106dfd1.js"><link rel="prefetch" href="/blog/assets/js/60.230b2314.js"><link rel="prefetch" href="/blog/assets/js/61.f9cb1ad6.js"><link rel="prefetch" href="/blog/assets/js/62.92f2597d.js"><link rel="prefetch" href="/blog/assets/js/63.25fe8e93.js"><link rel="prefetch" href="/blog/assets/js/64.08acc4bc.js"><link rel="prefetch" href="/blog/assets/js/65.cba08f56.js"><link rel="prefetch" href="/blog/assets/js/66.2aff3910.js"><link rel="prefetch" href="/blog/assets/js/67.23dfb624.js"><link rel="prefetch" href="/blog/assets/js/68.7e1a9696.js"><link rel="prefetch" href="/blog/assets/js/69.127d4ccb.js"><link rel="prefetch" href="/blog/assets/js/7.34cfb431.js"><link rel="prefetch" href="/blog/assets/js/70.cb7a9ca8.js"><link rel="prefetch" href="/blog/assets/js/71.fc5012c0.js"><link rel="prefetch" href="/blog/assets/js/72.04308961.js"><link rel="prefetch" href="/blog/assets/js/73.3b80efd9.js"><link rel="prefetch" href="/blog/assets/js/74.009897a1.js"><link rel="prefetch" href="/blog/assets/js/75.00bb0c95.js"><link rel="prefetch" href="/blog/assets/js/76.0b9619cc.js"><link rel="prefetch" href="/blog/assets/js/77.3cdf8f24.js"><link rel="prefetch" href="/blog/assets/js/78.2db1c727.js"><link rel="prefetch" href="/blog/assets/js/79.342c3faa.js"><link rel="prefetch" href="/blog/assets/js/8.51e80c5b.js"><link rel="prefetch" href="/blog/assets/js/80.0439653b.js"><link rel="prefetch" href="/blog/assets/js/81.6c0e9802.js"><link rel="prefetch" href="/blog/assets/js/82.e6e1608a.js"><link rel="prefetch" href="/blog/assets/js/84.4415141b.js"><link rel="prefetch" href="/blog/assets/js/85.00b63f10.js"><link rel="prefetch" href="/blog/assets/js/86.1581db60.js"><link rel="prefetch" href="/blog/assets/js/87.4c47bbc2.js"><link rel="prefetch" href="/blog/assets/js/88.10af48c1.js"><link rel="prefetch" href="/blog/assets/js/89.84840655.js"><link rel="prefetch" href="/blog/assets/js/9.c76e1545.js"><link rel="prefetch" href="/blog/assets/js/90.574990da.js"><link rel="prefetch" href="/blog/assets/js/91.a1094788.js"><link rel="prefetch" href="/blog/assets/js/92.7070acb6.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.389ed919.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/TB5.PNG" alt="Tang's Blog" class="logo"> <span class="site-name can-hide">Tang's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术笔记" class="dropdown-title"><span class="title">技术笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术笔记" class="mobile-dropdown-title"><span class="title">技术笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/blog/frontend/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/blog/db/" class="nav-link">
  DB
</a></li><li class="dropdown-item"><!----> <a href="/blog/microservice/" class="nav-link">
  微服务
</a></li><li class="dropdown-item"><!----> <a href="/blog/distribution/" class="nav-link">
  分布式
</a></li><li class="dropdown-item"><!----> <a href="/blog/bigdata/" class="nav-link">
  大数据
</a></li><li class="dropdown-item"><!----> <a href="/blog/devops/" class="nav-link">
  DevOps
</a></li><li class="dropdown-item"><!----> <a href="/blog/newlanguage/" class="nav-link router-link-active">
  新语言
</a></li><li class="dropdown-item"><!----> <a href="/blog/othertool/" class="nav-link">
  其他工具
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/readbook/" class="nav-link">
  读书分享
</a></li><li class="dropdown-item"><!----> <a href="/blog/guitar/" class="nav-link">
  吉他谱
</a></li><li class="dropdown-item"><!----> <a href="/blog/food/" class="nav-link">
  饮食
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术笔记" class="dropdown-title"><span class="title">技术笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术笔记" class="mobile-dropdown-title"><span class="title">技术笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/blog/frontend/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/blog/db/" class="nav-link">
  DB
</a></li><li class="dropdown-item"><!----> <a href="/blog/microservice/" class="nav-link">
  微服务
</a></li><li class="dropdown-item"><!----> <a href="/blog/distribution/" class="nav-link">
  分布式
</a></li><li class="dropdown-item"><!----> <a href="/blog/bigdata/" class="nav-link">
  大数据
</a></li><li class="dropdown-item"><!----> <a href="/blog/devops/" class="nav-link">
  DevOps
</a></li><li class="dropdown-item"><!----> <a href="/blog/newlanguage/" class="nav-link router-link-active">
  新语言
</a></li><li class="dropdown-item"><!----> <a href="/blog/othertool/" class="nav-link">
  其他工具
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/readbook/" class="nav-link">
  读书分享
</a></li><li class="dropdown-item"><!----> <a href="/blog/guitar/" class="nav-link">
  吉他谱
</a></li><li class="dropdown-item"><!----> <a href="/blog/food/" class="nav-link">
  饮食
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Go Lang</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/newlanguage/go/go1.html" class="sidebar-link">Go语言简介</a></li><li><a href="/blog/newlanguage/go/go2.html" class="sidebar-link">数据类型</a></li><li><a href="/blog/newlanguage/go/go3.html" aria-current="page" class="active sidebar-link">其他类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#函数" class="sidebar-link">函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#函数定义" class="sidebar-link">函数定义</a></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#函数类型和变量" class="sidebar-link">函数类型和变量</a></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#匿名函数" class="sidebar-link">匿名函数</a></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#golang中的闭包" class="sidebar-link">Golang中的闭包</a></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#defer语句" class="sidebar-link">defer语句</a></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#panic-revocer处理异常" class="sidebar-link">panic/revocer处理异常</a></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#异常运用场景" class="sidebar-link">异常运用场景</a></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#内置函数" class="sidebar-link">内置函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#接口" class="sidebar-link">接口</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#接口的介绍" class="sidebar-link">接口的介绍</a></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#go接口的定义" class="sidebar-link">Go接口的定义</a></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#空接口-object类型" class="sidebar-link">空接口（Object类型）</a></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#类型断言" class="sidebar-link">类型断言</a></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#结构体接收者" class="sidebar-link">结构体接收者</a></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#结构体实现多个接口" class="sidebar-link">结构体实现多个接口</a></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#接口嵌套" class="sidebar-link">接口嵌套</a></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#golang中空接口和类型断言" class="sidebar-link">Golang中空接口和类型断言</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#map" class="sidebar-link">map</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#map介绍" class="sidebar-link">map介绍</a></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#遍历map" class="sidebar-link">遍历map</a></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#判断map中某个键值是否存在" class="sidebar-link">判断map中某个键值是否存在</a></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#使用delete-函数删除键值对" class="sidebar-link">使用delete()函数删除键值对</a></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#元素为map类型的切片" class="sidebar-link">元素为map类型的切片</a></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#值为切片类型的map" class="sidebar-link">值为切片类型的map</a></li><li class="sidebar-sub-header"><a href="/blog/newlanguage/go/go3.html#示例" class="sidebar-link">示例</a></li></ul></li></ul></li><li><a href="/blog/newlanguage/go/go4.html" class="sidebar-link">Go 流程控制</a></li><li><a href="/blog/newlanguage/go/go5.html" class="sidebar-link">Go中的包</a></li><li><a href="/blog/newlanguage/go/go6.html" class="sidebar-link">Go中的日期函数</a></li><li><a href="/blog/newlanguage/go/go7.html" class="sidebar-link">Go中的文件和目录操作</a></li><li><a href="/blog/newlanguage/go/go8.html" class="sidebar-link">Golang goroutine channel 实现并发和并行</a></li><li><a href="/blog/newlanguage/go/go9.html" class="sidebar-link">Go中的反射</a></li><li><a href="/blog/newlanguage/go/go10.html" class="sidebar-link">互联网协议</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="其他类型"><a href="#其他类型" class="header-anchor">#</a> 其他类型</h1> <h2 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h2> <h3 id="函数定义"><a href="#函数定义" class="header-anchor">#</a> 函数定义</h3> <p>函数是组织好的、可重复使用的、用于执行指定任务的代码块</p> <p>Go语言支持：函数、匿名函数和闭包</p> <p>Go语言中定义函数使用func关键字，具体格式如下：</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token keyword">func</span> 函数名<span class="token punctuation">(</span>参数<span class="token punctuation">)</span><span class="token punctuation">(</span>返回值<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        函数体
    <span class="token punctuation">}</span>
</code></pre></div><p>其中：</p> <ul><li>函数名：由字母、数字、下划线组成。但函数名的第一个字母不能是数字。在同一个包内，函数名也不能重名</li></ul> <p>示例</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 求两个数的和</span>
    <span class="token keyword">func</span> <span class="token function">sumFn</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> x <span class="token operator">+</span> y
    <span class="token punctuation">}</span>
    <span class="token comment">// 调用方式</span>
    <span class="token function">sunFn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><p>获取可变的参数，可变参数是指函数的参数数量不固定。Go语言中的可变参数通过在参数名后面加... 来标识。</p> <p>注意：可变参数通常要作为函数的最后一个参数</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token keyword">func</span> <span class="token function">sunFn2</span><span class="token punctuation">(</span>x <span class="token operator">...</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
        sum <span class="token operator">:=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> num <span class="token operator">:=</span> <span class="token keyword">range</span> x <span class="token punctuation">{</span>
            sum <span class="token operator">=</span> sum <span class="token operator">+</span> num
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sum
    <span class="token punctuation">}</span>
    <span class="token comment">// 调用方法</span>
    <span class="token function">sunFn2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>
</code></pre></div><p>方法多返回值，Go语言中函数支持多返回值，同时还支持返回值命名，函数定义时可以给返回值命名，并在函数体中直接使用这些变量，最后通过return关键字返回</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 方法多返回值</span>
    <span class="token keyword">func</span> <span class="token function">sunFn4</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>sum <span class="token builtin">int</span><span class="token punctuation">,</span> sub <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        sum <span class="token operator">=</span> x <span class="token operator">+</span> y
        sub <span class="token operator">=</span> x <span class="token operator">-</span>y
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="函数类型和变量"><a href="#函数类型和变量" class="header-anchor">#</a> 函数类型和变量</h3> <h4 id="定义函数类型"><a href="#定义函数类型" class="header-anchor">#</a> 定义函数类型</h4> <p>我们可以使用type关键字来定义一个函数类型，具体格式如下</p> <div class="language-bash extra-class"><pre class="language-bash"><code>    <span class="token builtin class-name">type</span> calculation func<span class="token punctuation">(</span>int, int<span class="token punctuation">)</span> int 
</code></pre></div><p>上面语句定义了一个calculation类型，它是一种函数类型，这种函数接收两个int类型的参数并且返回一个int类型的返回值。</p> <p>简单来说，凡是满足这两个条件的函数都是calculation类型的函数，例如下面的add 和 sub 是calculation类型</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token keyword">type</span> calc <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span>
    <span class="token comment">// 求两个数的和</span>
    <span class="token keyword">func</span> <span class="token function">sumFn</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> x <span class="token operator">+</span> y
    <span class="token punctuation">}</span>
    <span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> c calc
        c <span class="token operator">=</span> add
    <span class="token punctuation">}</span>
</code></pre></div><h4 id="方法作为参数"><a href="#方法作为参数" class="header-anchor">#</a> 方法作为参数</h4> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">/**
        传递两个参数和一个方法
    */</span>
    <span class="token keyword">func</span> sunFn <span class="token punctuation">(</span>a <span class="token builtin">int</span><span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">,</span> sum <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">sum</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>或者使用switch定义方法，这里用到了匿名函数</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 返回一个方法</span>
    <span class="token keyword">type</span> calcType <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token builtin">int</span>
    <span class="token keyword">func</span> <span class="token function">do</span><span class="token punctuation">(</span>o <span class="token builtin">string</span><span class="token punctuation">)</span> calcType <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> o <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token string">&quot;+&quot;</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">,</span> i2 <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> i <span class="token operator">+</span> i2
                <span class="token punctuation">}</span>
            <span class="token keyword">case</span> <span class="token string">&quot;-&quot;</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">,</span> i2 <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> i <span class="token operator">-</span> i2
                <span class="token punctuation">}</span>
            <span class="token keyword">case</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">,</span> i2 <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> i <span class="token operator">*</span> i2
                <span class="token punctuation">}</span>
            <span class="token keyword">case</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">,</span> i2 <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> i <span class="token operator">/</span> i2
                <span class="token punctuation">}</span>
            <span class="token keyword">default</span><span class="token punctuation">:</span>
                <span class="token keyword">return</span> <span class="token boolean">nil</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        add <span class="token operator">:=</span> <span class="token function">do</span><span class="token punctuation">(</span><span class="token string">&quot;+&quot;</span><span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="匿名函数"><a href="#匿名函数" class="header-anchor">#</a> 匿名函数</h3> <p>函数当然还可以作为返回值，但是在Go语言中，函数内部不能再像之前那样定义函数了，只能定义匿名函数。匿名函数就是没有函数名的函数，匿名函数的定义格式如下</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token keyword">func</span> <span class="token punctuation">(</span>参数<span class="token punctuation">)</span><span class="token punctuation">(</span>返回值<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        函数体
    <span class="token punctuation">}</span>
</code></pre></div><p>匿名函数因为没有函数名，所以没有办法像普通函数那样调用，所以匿名函数需要保存到某个变量或者作为立即执行函数：</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">func</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;匿名自执行函数&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="golang中的闭包"><a href="#golang中的闭包" class="header-anchor">#</a> Golang中的闭包</h3> <h4 id="全局变量和局部变量"><a href="#全局变量和局部变量" class="header-anchor">#</a> 全局变量和局部变量</h4> <p>全局变量的特点：</p> <ul><li>常驻内存</li> <li>污染全局</li></ul> <p>局部变量的特点</p> <ul><li>不常驻内存</li> <li>不污染全局</li></ul> <h4 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h4> <ul><li>可以让一个变量常驻内存</li> <li>可以让一个变量不污染全局</li></ul> <p>闭包可以理解成 “定义在一个函数内部的函数”。在本质上，闭包就是将函数内部 和 函数外部连接起来的桥梁。或者说是函数和其引用环境的组合体。</p> <ul><li>闭包是指有权访问另一个函数作用域中的变量的函数</li> <li>创建闭包的常见的方式就是在一个函数内部创建另一个函数，通过另一个函数访问这个函数的局部变量</li></ul> <p>注意：由于闭包里作用域返回的局部变量资源不会被立刻销毁，所以可能会占用更多的内存，过度使用闭包会导致性能下降，建议在非常有必要的时候才使用闭包。</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 闭包的写法：函数里面嵌套一个函数，最后返回里面的函数就形成了闭包</span>
    <span class="token keyword">func</span> <span class="token function">adder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">10</span>
        <span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> i <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token function">adder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>最后输出的结果</p> <div class="language-bash extra-class"><pre class="language-bash"><code>    <span class="token number">11</span>
    <span class="token number">11</span>
    <span class="token number">11</span>
</code></pre></div><p>另一个闭包的写法，让一个变量常驻内存，不污染全局</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token keyword">func</span> <span class="token function">adder2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span>y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">10</span>
        <span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
            i <span class="token operator">=</span> i <span class="token operator">+</span> y
            <span class="token keyword">return</span> i
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> fn2 <span class="token operator">=</span> <span class="token function">adder2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">fn2</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">fn2</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">fn2</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="defer语句"><a href="#defer语句" class="header-anchor">#</a> defer语句</h3> <p>Go 语言中的defer 语句会将其后面跟随的语句进行延迟处理。在defer归属的函数即将返回时，将延迟处理的语句按defer定义的逆序进行执行，也就是说，先被defer的语句最后被执行，最后被defer的语句，最先被执行。</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// defer函数</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;4&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>defer将会延迟执行</p> <div class="language-bash extra-class"><pre class="language-bash"><code>    <span class="token number">1</span>
    <span class="token number">3</span>
    <span class="token number">4</span>
    <span class="token number">2</span>
</code></pre></div><p>如果有多个defer修饰的语句，将会逆序进行执行</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// defer函数</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;4&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>运行结果</p> <div class="language-bash extra-class"><pre class="language-bash"><code>    <span class="token number">1</span>
    <span class="token number">4</span>
    <span class="token number">3</span>
    <span class="token number">2</span>
</code></pre></div><p>如果需要用defer运行一系列的语句，那么就可以使用匿名函数</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;开始&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;结束&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>运行结果</p> <div class="language-bash extra-class"><pre class="language-bash"><code>    开始
    结束
    <span class="token number">1</span>
    <span class="token number">2</span>
</code></pre></div><h4 id="defer执行时机"><a href="#defer执行时机" class="header-anchor">#</a> defer执行时机</h4> <p>在Go语言的函数中return语句在底层并不是原子操作，它分为返回值赋值和RET指令两步。而defer语句执行的时机就在返回值赋值操作后，RET指令执行前，具体如下图所示</p> <p><img src="images/image-20200720220700249.png" alt="image-20200720220700249"></p> <h3 id="panic-revocer处理异常"><a href="#panic-revocer处理异常" class="header-anchor">#</a> panic/revocer处理异常</h3> <p>Go语言中是没有异常机制，但是使用panic / recover模式来处理错误</p> <ul><li>panic：可以在任何地方引发</li> <li>recover：只有在defer调用函数内有效</li></ul> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token keyword">func</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;fn1&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;抛出一个异常&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;结束&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>上述程序会直接抛出异常，无法正常运行</p> <div class="language-bash extra-class"><pre class="language-bash"><code>    fn1
    panic: 抛出一个异常
</code></pre></div><p>解决方法就是使用 recover进行异常的监听</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token keyword">func</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;fn1&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 使用recover监听异常</span>
        <span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            err <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
                fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;抛出一个异常&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;结束&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="异常运用场景"><a href="#异常运用场景" class="header-anchor">#</a> 异常运用场景</h3> <p>模拟一个读取文件的方法，这里可以主动发送使用panic  和 recover</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token keyword">func</span> <span class="token function">readFile</span><span class="token punctuation">(</span>fileName <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> fileName <span class="token operator">==</span> <span class="token string">&quot;main.go&quot;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">nil</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;读取文件失败&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> myFn <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> e <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
                fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;给管理员发送邮件&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        err <span class="token operator">:=</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;XXX.go&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
            <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">myFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="内置函数"><a href="#内置函数" class="header-anchor">#</a> 内置函数</h3> <table><thead><tr><th>内置函数</th> <th>介绍</th></tr></thead> <tbody><tr><td>close</td> <td>主要用来关闭channel</td></tr> <tr><td>len</td> <td>用来求长度，比如string、array、slice、map、channel</td></tr> <tr><td>new</td> <td>用来分配内存、主要用来分配值类型，比如 int、struct ，返回的是指针</td></tr> <tr><td>make</td> <td>用来分配内存，主要用来分配引用类型，比如chan、map、slice</td></tr> <tr><td>append</td> <td>用来追加元素到数组、slice中</td></tr> <tr><td>panic\recover</td> <td>用来处理错误</td></tr></tbody></table> <h2 id="接口"><a href="#接口" class="header-anchor">#</a> 接口</h2> <h3 id="接口的介绍"><a href="#接口的介绍" class="header-anchor">#</a> 接口的介绍</h3> <p>现实生活中手机、相机、U盘都可以和电脑的USB接口建立连接。我们不需要关注usb卡槽大小是否一样，因为所有的USB接口都是按照统一的标准来设计的。</p> <p>Golang中的接口是一种抽象数据类型，Golang中接口定义了对象的行为规范，只定义规范不实现。接口中定义的规范由具体的对象来实现。</p> <p>通俗的讲接口就一个标准，它是对一个对象的行为和规范进行约定，约定实现接口的对象必须得按照接口的规范。</p> <h3 id="go接口的定义"><a href="#go接口的定义" class="header-anchor">#</a> Go接口的定义</h3> <p>在Golang中接口（interface）是一种类型，一种抽象的类型。接口（interface）是一组函数method的集合，Golang中的接口不能包含任何变量。</p> <p>在Golang中接口中的所有方法都没有方法体，接口定义了一个对象的行为规范，只定义规范不实现。接口体现了程序设计的多态和高内聚低耦合的思想N Golang中的接口也是一种数据类型，不需要显示实现。只需要一个变量含有接口类型中的所有方法，那么这个变量就实现了这个接口。</p> <p>Golang中每个接口由数个方法组成，接口的定义格式如下：</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token keyword">type</span> 接口名 <span class="token keyword">interface</span> <span class="token punctuation">{</span>
        方法名<span class="token number">1</span> <span class="token punctuation">(</span>参数列表<span class="token number">1</span><span class="token punctuation">)</span> 返回值列表<span class="token number">1</span>
        方法名<span class="token number">2</span> <span class="token punctuation">(</span>参数列表<span class="token number">2</span><span class="token punctuation">)</span> 返回值列表<span class="token number">2</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><strong>其中</strong></p> <ul><li><strong>接口名</strong>：使用type将接口定义为自定义的类型名。Go语言的接口在命名时，一般会在单词后面添加er，如有写操作的接口叫Writer，有字符串功能的接口叫Stringer等，接口名最好突出该接口的类型含义。</li> <li><strong>方法名</strong>：当方法名首字母是大写且这个接口类型名首字母也是大写时，这个方法可以被接口所在的包（package）之外的代码访问。</li> <li><strong>参数列表、返回值列表</strong>：参数列表和返回值列表中的参数变量名是可以省略</li></ul> <p>演示：定义一个Usber接口让Phone 和 Camera结构体实现这个接口</p> <p>首先我们定义一个Usber接口，接口里面就定义了两个方法</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 定义一个Usber接口</span>
    <span class="token keyword">type</span> Usber <span class="token keyword">interface</span> <span class="token punctuation">{</span>
        <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>然后我们在创建一个手机结构体</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 如果接口里面有方法的话，必须要通过结构体或自定义类型实现这个接口</span>

    <span class="token comment">// 使用结构体来实现 接口</span>
    <span class="token keyword">type</span> Phone <span class="token keyword">struct</span> <span class="token punctuation">{</span>
        Name <span class="token builtin">string</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 手机要实现Usber接口的话，必须实现usb接口的所有方法</span>
    <span class="token keyword">func</span> <span class="token punctuation">(</span>p Phone<span class="token punctuation">)</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> <span class="token string">&quot;启动&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">func</span> <span class="token punctuation">(</span>p Phone<span class="token punctuation">)</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> <span class="token string">&quot;关闭&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>然后我们在创建一个Phone的结构体，来实现这个接口</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 如果接口里面有方法的话，必须要通过结构体或自定义类型实现这个接口</span>

    <span class="token comment">// 使用结构体来实现 接口</span>
    <span class="token keyword">type</span> Phone <span class="token keyword">struct</span> <span class="token punctuation">{</span>
        Name <span class="token builtin">string</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 手机要实现Usber接口的话，必须实现usb接口的所有方法</span>
    <span class="token keyword">func</span> <span class="token punctuation">(</span>p Phone<span class="token punctuation">)</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> <span class="token string">&quot;启动&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">func</span> <span class="token punctuation">(</span>p Phone<span class="token punctuation">)</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> <span class="token string">&quot;关闭&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> phone Usber <span class="token operator">=</span> Phone<span class="token punctuation">{</span>
            <span class="token string">&quot;三星手机&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
        phone<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        phone<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>我们在创建一个Camera结构体</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 使用相机结构体来实现 接口</span>
    <span class="token keyword">type</span> Camera <span class="token keyword">struct</span> <span class="token punctuation">{</span>
        Name <span class="token builtin">string</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 相机要实现Usber接口的话，必须实现usb接口的所有方法</span>
    <span class="token keyword">func</span> <span class="token punctuation">(</span>p Camera<span class="token punctuation">)</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> <span class="token string">&quot;启动&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">func</span> <span class="token punctuation">(</span>p Camera<span class="token punctuation">)</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> <span class="token string">&quot;关闭&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> camera Usber <span class="token operator">=</span> Camera<span class="token punctuation">{</span>
            <span class="token string">&quot;佳能&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
        camera<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        camera<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>我们创建一个电脑的结构体，电脑的结构体就是用于接收两个实现了Usber的结构体，然后让其工作</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 电脑</span>
    <span class="token keyword">type</span> Computer <span class="token keyword">struct</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 接收一个实现了Usber接口的 结构体</span>
    <span class="token keyword">func</span> <span class="token punctuation">(</span>computer Computer<span class="token punctuation">)</span> <span class="token function">Startup</span><span class="token punctuation">(</span>usb Usber<span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        usb<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 关闭</span>
    <span class="token keyword">func</span> <span class="token punctuation">(</span>computer Computer<span class="token punctuation">)</span> Shutdown <span class="token punctuation">(</span>usb Usber<span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        usb<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>最后我们在main中调用方法</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> camera interfaceDemo<span class="token punctuation">.</span>Camera <span class="token operator">=</span> interfaceDemo<span class="token punctuation">.</span>Camera<span class="token punctuation">{</span>
            <span class="token string">&quot;佳能&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">var</span> phone interfaceDemo<span class="token punctuation">.</span>Phone <span class="token operator">=</span> interfaceDemo<span class="token punctuation">.</span>Phone<span class="token punctuation">{</span>
            <span class="token string">&quot;苹果&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">var</span> computer interfaceDemo<span class="token punctuation">.</span>Computer <span class="token operator">=</span> interfaceDemo<span class="token punctuation">.</span>Computer<span class="token punctuation">{</span><span class="token punctuation">}</span>
        computer<span class="token punctuation">.</span><span class="token function">Startup</span><span class="token punctuation">(</span>camera<span class="token punctuation">)</span>
        computer<span class="token punctuation">.</span><span class="token function">Startup</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span>
        computer<span class="token punctuation">.</span><span class="token function">Shutdown</span><span class="token punctuation">(</span>camera<span class="token punctuation">)</span>
        computer<span class="token punctuation">.</span><span class="token function">Shutdown</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>运行结果如下所示：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>    佳能 启动
    苹果 启动
    佳能 关闭
    苹果 关闭
</code></pre></div><h3 id="空接口-object类型"><a href="#空接口-object类型" class="header-anchor">#</a> 空接口（Object类型）</h3> <p>Golang中的接口可以不定义任何方法，没有定义任何方法的接口就是空接口。空接口表示没有任何约束，因此任何类型变量都可以实现空接口。</p> <p>空接口在实际项目中用的是非常多的，用空接口可以表示任意数据类型。</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 空接口表示没有任何约束，任意的类型都可以实现空接口</span>
    <span class="token keyword">type</span> EmptyA <span class="token keyword">interface</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> a EmptyA
        <span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;你好golang&quot;</span>
        <span class="token comment">// 让字符串实现A接口</span>
        a <span class="token operator">=</span> str
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>同时golang中空接口也可以直接当做类型来使用，可以表示任意类型。相当于Java中的Object类型</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token keyword">var</span> a <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    a <span class="token operator">=</span> <span class="token number">20</span>
    a <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span>
    a <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre></div><p>空接口可以作为函数的参数，使用空接口可以接收任意类型的函数参数</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 空接口作为函数参数</span>
    <span class="token keyword">func</span> <span class="token function">show</span><span class="token punctuation">(</span>a <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><h4 id="map的值实现空接口"><a href="#map的值实现空接口" class="header-anchor">#</a> map的值实现空接口</h4> <p>使用空接口实现可以保存任意值的字典</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 定义一个值为空接口类型</span>
    <span class="token keyword">var</span> studentInfo <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    studentInfo<span class="token punctuation">[</span><span class="token string">&quot;userName&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;张三&quot;</span>
    studentInfo<span class="token punctuation">[</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">15</span>
    studentInfo<span class="token punctuation">[</span><span class="token string">&quot;isWork&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre></div><h4 id="slice切片实现空接口"><a href="#slice切片实现空接口" class="header-anchor">#</a> slice切片实现空接口</h4> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 定义一个空接口类型的切片</span>
    <span class="token keyword">var</span> slice <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
    slice<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;张三&quot;</span>
    slice<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
    slice<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre></div><h3 id="类型断言"><a href="#类型断言" class="header-anchor">#</a> 类型断言</h3> <p>一个接口的值（简称接口值）是由一个具体类型和具体类型的值两部分组成的。这两部分分别称为接口的动态类型和动态值。</p> <p>如果我们想要判断空接口中值的类型，那么这个时候就可以使用类型断言，其语法格式：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>    x.<span class="token punctuation">(</span>T<span class="token punctuation">)</span>
</code></pre></div><p>其中：</p> <ul><li>X：表示类型为interface{}的变量</li> <li>T：表示断言x可能是的类型</li></ul> <p>该语法返回两个参数，第一个参数是x转化为T类型后的变量，第二个值是一个布尔值，若为true则表示断言成功，为false则表示断言失败</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 类型断言</span>
    <span class="token keyword">var</span> a <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    a <span class="token operator">=</span> <span class="token string">&quot;132&quot;</span>
    value<span class="token punctuation">,</span> isString <span class="token operator">:=</span> a<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> isString <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;是String类型, 值为：&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;断言失败&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>或者我们可以定义一个能传入任意类型的方法</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 定义一个方法，可以传入任意数据类型，然后根据不同类型实现不同的功能</span>
    <span class="token keyword">func</span> <span class="token function">Print</span><span class="token punctuation">(</span>x <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span>ok <span class="token operator">:=</span> x<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;传入参数是string类型&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> ok <span class="token operator">:=</span> x<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;传入参数是int类型&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;传入其它类型&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>上面的示例代码中，如果要断言多次，那么就需要写很多if，这个时候我们可以使用switch语句来实现：</p> <p><strong>注意：</strong> 类型.(type) 只能结合switch语句使用</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token keyword">func</span> <span class="token function">Print2</span><span class="token punctuation">(</span>x <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> x<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;int类型&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token builtin">string</span><span class="token punctuation">:</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;string类型&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token builtin">bool</span><span class="token punctuation">:</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;bool类型&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span>
            fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;其它类型&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="结构体接收者"><a href="#结构体接收者" class="header-anchor">#</a> 结构体接收者</h3> <h4 id="值接收者"><a href="#值接收者" class="header-anchor">#</a> 值接收者</h4> <p>如果结构体中的方法是值接收者，那么实例化后的结构体值类型和结构体指针类型都可以赋值给接口变量</p> <h3 id="结构体实现多个接口"><a href="#结构体实现多个接口" class="header-anchor">#</a> 结构体实现多个接口</h3> <p>实现多个接口的话，可能就同时用两个接口进行结构体的接受</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 定义一个Animal的接口，Animal中定义了两个方法，分别是setName 和 getName，分别让DOg结构体和Cat结构体实现</span>
    <span class="token keyword">type</span> Animal <span class="token keyword">interface</span> <span class="token punctuation">{</span>
        <span class="token function">SetName</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 接口2</span>
    <span class="token keyword">type</span> Animal2 <span class="token keyword">interface</span> <span class="token punctuation">{</span>
        <span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token builtin">string</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">type</span> Dog <span class="token keyword">struct</span> <span class="token punctuation">{</span>
        Name <span class="token builtin">string</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token punctuation">(</span>d <span class="token operator">*</span>Dog<span class="token punctuation">)</span> <span class="token function">SetName</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        d<span class="token punctuation">.</span>Name <span class="token operator">=</span> name
    <span class="token punctuation">}</span>
    <span class="token keyword">func</span> <span class="token punctuation">(</span>d Dog<span class="token punctuation">)</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token builtin">string</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> d<span class="token punctuation">.</span>Name
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> dog <span class="token operator">=</span> <span class="token operator">&amp;</span>Dog<span class="token punctuation">{</span>
            <span class="token string">&quot;小黑&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 同时实现两个接口</span>
        <span class="token keyword">var</span> d1 Animal <span class="token operator">=</span> dog
        <span class="token keyword">var</span> d2 Animal2 <span class="token operator">=</span> dog
        d1<span class="token punctuation">.</span><span class="token function">SetName</span><span class="token punctuation">(</span><span class="token string">&quot;小鸡&quot;</span><span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>d2<span class="token punctuation">.</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="接口嵌套"><a href="#接口嵌套" class="header-anchor">#</a> 接口嵌套</h3> <p>在golang中，允许接口嵌套接口，我们首先创建一个 Animal1 和 Animal2 接口，然后使用Animal接受刚刚的两个接口，实现接口的嵌套。</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 定义一个Animal的接口，Animal中定义了两个方法，分别是setName 和 getName，分别让DOg结构体和Cat结构体实现</span>
    <span class="token keyword">type</span> Animal1 <span class="token keyword">interface</span> <span class="token punctuation">{</span>
        <span class="token function">SetName</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 接口2</span>
    <span class="token keyword">type</span> Animal2 <span class="token keyword">interface</span> <span class="token punctuation">{</span>
        <span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token builtin">string</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">type</span> Animal <span class="token keyword">interface</span> <span class="token punctuation">{</span>
        Animal1
        Animal2
    <span class="token punctuation">}</span>

    <span class="token keyword">type</span> Dog <span class="token keyword">struct</span> <span class="token punctuation">{</span>
        Name <span class="token builtin">string</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token punctuation">(</span>d <span class="token operator">*</span>Dog<span class="token punctuation">)</span> <span class="token function">SetName</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        d<span class="token punctuation">.</span>Name <span class="token operator">=</span> name
    <span class="token punctuation">}</span>
    <span class="token keyword">func</span> <span class="token punctuation">(</span>d Dog<span class="token punctuation">)</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token builtin">string</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> d<span class="token punctuation">.</span>Name
    <span class="token punctuation">}</span>

    <span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> dog <span class="token operator">=</span> <span class="token operator">&amp;</span>Dog<span class="token punctuation">{</span>
            <span class="token string">&quot;小黑&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 同时实现两个接口</span>
        <span class="token keyword">var</span> d Animal <span class="token operator">=</span> dog
        d<span class="token punctuation">.</span><span class="token function">SetName</span><span class="token punctuation">(</span><span class="token string">&quot;小鸡&quot;</span><span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="golang中空接口和类型断言"><a href="#golang中空接口和类型断言" class="header-anchor">#</a> Golang中空接口和类型断言</h3> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// golang中空接口和类型断言</span>
    <span class="token keyword">var</span> userInfo <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    userInfo<span class="token punctuation">[</span><span class="token string">&quot;userName&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;zhangsan&quot;</span>
    userInfo<span class="token punctuation">[</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span>
    userInfo<span class="token punctuation">[</span><span class="token string">&quot;hobby&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;吃饭&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;睡觉&quot;</span><span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">[</span><span class="token string">&quot;userName&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">[</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">[</span><span class="token string">&quot;hobby&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment">// 但是我们空接口如何获取数组中的值？发现 userInfo[&quot;hobby&quot;][0]  这样做不行</span>
    <span class="token comment">// fmt.Println(userInfo[&quot;hobby&quot;][0])</span>
</code></pre></div><p>也就是我们的空接口，无法直接通过索引获取数组中的内容，因此这个时候就需要使用类型断言了</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 这个时候我们就可以使用类型断言了</span>
    hobbyValue<span class="token punctuation">,</span>ok <span class="token operator">:=</span> userInfo<span class="token punctuation">[</span><span class="token string">&quot;hobby&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> ok <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>hobbyValue<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>通过类型断言返回来的值，我们就能够直接通过角标获取了。</p> <h2 id="map"><a href="#map" class="header-anchor">#</a> map</h2> <h3 id="map介绍"><a href="#map介绍" class="header-anchor">#</a> map介绍</h3> <p>map是一种无序的基于key-value的数据结构，Go语言中的map是引用类型，必须初始化才能使用。</p> <p>Go语言中map的定义语法如下：</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token keyword">map</span><span class="token punctuation">[</span>KeyType<span class="token punctuation">]</span>ValueType
</code></pre></div><p>其中：</p> <ul><li>KeyType：表示键的类型</li> <li>ValueType：表示键对应的值的类型</li></ul> <p>map类型的变量默认初始值为nil，需要使用make()函数来分配内存。语法为：</p> <p>make：用于slice、map和channel的初始化</p> <p>示例如下所示：</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 方式1初始化</span>
    <span class="token keyword">var</span> userInfo <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>
    userInfo<span class="token punctuation">[</span><span class="token string">&quot;userName&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;zhangsan&quot;</span>
    userInfo<span class="token punctuation">[</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;20&quot;</span>
    userInfo<span class="token punctuation">[</span><span class="token string">&quot;sex&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;男&quot;</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">[</span><span class="token string">&quot;userName&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 创建方式2，map也支持声明的时候填充元素</span>
    <span class="token keyword">var</span> userInfo2 <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;username&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;21&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;sex&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;女&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>userInfo2<span class="token punctuation">)</span>
</code></pre></div><h3 id="遍历map"><a href="#遍历map" class="header-anchor">#</a> 遍历map</h3> <p>使用for range遍历</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 遍历map</span>
    <span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> userInfo2 <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;key:&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token string">&quot; value:&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="判断map中某个键值是否存在"><a href="#判断map中某个键值是否存在" class="header-anchor">#</a> 判断map中某个键值是否存在</h3> <p>我们在获取map的时候，会返回两个值，也可以是返回的结果，一个是是否有该元素</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 判断是否存在,如果存在  ok = true，否则 ok = false</span>
    value<span class="token punctuation">,</span> ok <span class="token operator">:=</span> userInfo2<span class="token punctuation">[</span><span class="token string">&quot;username2&quot;</span><span class="token punctuation">]</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> ok<span class="token punctuation">)</span>
</code></pre></div><h3 id="使用delete-函数删除键值对"><a href="#使用delete-函数删除键值对" class="header-anchor">#</a> 使用delete()函数删除键值对</h3> <p>使用delete()内建函数从map中删除一组键值对，delete函数的格式如下所示</p> <div class="language-bash extra-class"><pre class="language-bash"><code>    delete<span class="token punctuation">(</span>map 对象, key<span class="token punctuation">)</span>
</code></pre></div><p>其中：</p> <ul><li>map对象：表示要删除键值对的map对象</li> <li>key：表示要删除的键值对的键</li></ul> <p>示例代码如下</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 删除map数据里面的key，以及对应的值</span>
    <span class="token function">delete</span><span class="token punctuation">(</span>userInfo2<span class="token punctuation">,</span> <span class="token string">&quot;sex&quot;</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>userInfo2<span class="token punctuation">)</span>
</code></pre></div><h3 id="元素为map类型的切片"><a href="#元素为map类型的切片" class="header-anchor">#</a> 元素为map类型的切片</h3> <p>我们想要在切片里面存放一系列用户的信息，这时候我们就可以定义一个元素为map类型的切片</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 切片在中存放map</span>
    <span class="token keyword">var</span> userInfoList <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>
        <span class="token string">&quot;userName&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;张安&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;15&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> user2 <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>
        <span class="token string">&quot;userName&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;张2&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;15&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> user3 <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>
        <span class="token string">&quot;userName&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;张3&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;15&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    userInfoList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> user
    userInfoList<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> user2
    userInfoList<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> user3
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>userInfoList<span class="token punctuation">)</span>

    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> item <span class="token operator">:=</span> <span class="token keyword">range</span> userInfoList <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="值为切片类型的map"><a href="#值为切片类型的map" class="header-anchor">#</a> 值为切片类型的map</h3> <p>我们可以在map中存储切片</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 将map类型的值</span>
    <span class="token keyword">var</span> userinfo <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>
    userinfo<span class="token punctuation">[</span><span class="token string">&quot;hobby&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token punctuation">{</span><span class="token string">&quot;吃饭&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;睡觉&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;敲代码&quot;</span><span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>userinfo<span class="token punctuation">)</span>
</code></pre></div><h3 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h3> <p>统计字符串中单词出现的次数</p> <div class="language-go extra-class"><pre class="language-go"><code>    <span class="token comment">// 写一个程序，统计一个字符串中每个单词出现的次数。比如 &quot;how do you do&quot;</span>
    <span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;how do you do&quot;</span>
    array <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span>
    countMap <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> item <span class="token operator">:=</span> <span class="token keyword">range</span> array <span class="token punctuation">{</span>
        countMap<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token operator">++</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>countMap<span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/newlanguage/go/go2.html" class="prev">
        数据类型
      </a></span> <span class="next"><a href="/blog/newlanguage/go/go4.html">
        Go 流程控制
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.96a63ad2.js" defer></script><script src="/blog/assets/js/2.e671b9b2.js" defer></script><script src="/blog/assets/js/3.be9bea65.js" defer></script><script src="/blog/assets/js/83.39a82281.js" defer></script>
  </body>
</html>
