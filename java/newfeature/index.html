<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>版本概览 | Tang&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/blog/TB5.PNG">
    <meta name="description" content="This is a blog.">
    
    <link rel="preload" href="/blog/assets/css/0.styles.389ed919.css" as="style"><link rel="preload" href="/blog/assets/js/app.96a63ad2.js" as="script"><link rel="preload" href="/blog/assets/js/2.e671b9b2.js" as="script"><link rel="preload" href="/blog/assets/js/3.be9bea65.js" as="script"><link rel="preload" href="/blog/assets/js/72.04308961.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.6769ccf0.js"><link rel="prefetch" href="/blog/assets/js/11.46df150a.js"><link rel="prefetch" href="/blog/assets/js/12.e78943d6.js"><link rel="prefetch" href="/blog/assets/js/13.5d361c1d.js"><link rel="prefetch" href="/blog/assets/js/14.13534fd9.js"><link rel="prefetch" href="/blog/assets/js/15.b21fe2e3.js"><link rel="prefetch" href="/blog/assets/js/16.bf5062c1.js"><link rel="prefetch" href="/blog/assets/js/17.65346b85.js"><link rel="prefetch" href="/blog/assets/js/18.6fb1bdc2.js"><link rel="prefetch" href="/blog/assets/js/19.c6e110df.js"><link rel="prefetch" href="/blog/assets/js/20.4a33f06a.js"><link rel="prefetch" href="/blog/assets/js/21.28170e84.js"><link rel="prefetch" href="/blog/assets/js/22.9358a818.js"><link rel="prefetch" href="/blog/assets/js/23.136a0f54.js"><link rel="prefetch" href="/blog/assets/js/24.499aeaaf.js"><link rel="prefetch" href="/blog/assets/js/25.3cff72a1.js"><link rel="prefetch" href="/blog/assets/js/26.4ee8c52f.js"><link rel="prefetch" href="/blog/assets/js/27.6e099c82.js"><link rel="prefetch" href="/blog/assets/js/28.bfc3427b.js"><link rel="prefetch" href="/blog/assets/js/29.ce801df4.js"><link rel="prefetch" href="/blog/assets/js/30.724cfbb6.js"><link rel="prefetch" href="/blog/assets/js/31.ffd0a663.js"><link rel="prefetch" href="/blog/assets/js/32.feba734b.js"><link rel="prefetch" href="/blog/assets/js/33.e8d22227.js"><link rel="prefetch" href="/blog/assets/js/34.a12f435a.js"><link rel="prefetch" href="/blog/assets/js/35.31d4b272.js"><link rel="prefetch" href="/blog/assets/js/36.a6d04eab.js"><link rel="prefetch" href="/blog/assets/js/37.d8aae5c8.js"><link rel="prefetch" href="/blog/assets/js/38.2d9e0b46.js"><link rel="prefetch" href="/blog/assets/js/39.f9bd73de.js"><link rel="prefetch" href="/blog/assets/js/4.850a33ae.js"><link rel="prefetch" href="/blog/assets/js/40.5ef065c5.js"><link rel="prefetch" href="/blog/assets/js/41.014df883.js"><link rel="prefetch" href="/blog/assets/js/42.199ac029.js"><link rel="prefetch" href="/blog/assets/js/43.69e01de9.js"><link rel="prefetch" href="/blog/assets/js/44.b00eed2f.js"><link rel="prefetch" href="/blog/assets/js/45.f676a314.js"><link rel="prefetch" href="/blog/assets/js/46.d76b7b8a.js"><link rel="prefetch" href="/blog/assets/js/47.fa6622ba.js"><link rel="prefetch" href="/blog/assets/js/48.629ae724.js"><link rel="prefetch" href="/blog/assets/js/49.3f36b8cf.js"><link rel="prefetch" href="/blog/assets/js/5.c1ab3a44.js"><link rel="prefetch" href="/blog/assets/js/50.6429bdc0.js"><link rel="prefetch" href="/blog/assets/js/51.b7cb8687.js"><link rel="prefetch" href="/blog/assets/js/52.7360a167.js"><link rel="prefetch" href="/blog/assets/js/53.fb5fcabb.js"><link rel="prefetch" href="/blog/assets/js/54.f5ac5958.js"><link rel="prefetch" href="/blog/assets/js/55.592b0348.js"><link rel="prefetch" href="/blog/assets/js/56.d17f3acb.js"><link rel="prefetch" href="/blog/assets/js/57.11aeb3ed.js"><link rel="prefetch" href="/blog/assets/js/58.1b2f9f8b.js"><link rel="prefetch" href="/blog/assets/js/59.c5633b7a.js"><link rel="prefetch" href="/blog/assets/js/6.0106dfd1.js"><link rel="prefetch" href="/blog/assets/js/60.230b2314.js"><link rel="prefetch" href="/blog/assets/js/61.f9cb1ad6.js"><link rel="prefetch" href="/blog/assets/js/62.92f2597d.js"><link rel="prefetch" href="/blog/assets/js/63.25fe8e93.js"><link rel="prefetch" href="/blog/assets/js/64.08acc4bc.js"><link rel="prefetch" href="/blog/assets/js/65.cba08f56.js"><link rel="prefetch" href="/blog/assets/js/66.2aff3910.js"><link rel="prefetch" href="/blog/assets/js/67.23dfb624.js"><link rel="prefetch" href="/blog/assets/js/68.7e1a9696.js"><link rel="prefetch" href="/blog/assets/js/69.127d4ccb.js"><link rel="prefetch" href="/blog/assets/js/7.34cfb431.js"><link rel="prefetch" href="/blog/assets/js/70.cb7a9ca8.js"><link rel="prefetch" href="/blog/assets/js/71.fc5012c0.js"><link rel="prefetch" href="/blog/assets/js/73.3b80efd9.js"><link rel="prefetch" href="/blog/assets/js/74.009897a1.js"><link rel="prefetch" href="/blog/assets/js/75.00bb0c95.js"><link rel="prefetch" href="/blog/assets/js/76.0b9619cc.js"><link rel="prefetch" href="/blog/assets/js/77.3cdf8f24.js"><link rel="prefetch" href="/blog/assets/js/78.2db1c727.js"><link rel="prefetch" href="/blog/assets/js/79.342c3faa.js"><link rel="prefetch" href="/blog/assets/js/8.51e80c5b.js"><link rel="prefetch" href="/blog/assets/js/80.0439653b.js"><link rel="prefetch" href="/blog/assets/js/81.6c0e9802.js"><link rel="prefetch" href="/blog/assets/js/82.e6e1608a.js"><link rel="prefetch" href="/blog/assets/js/83.39a82281.js"><link rel="prefetch" href="/blog/assets/js/84.4415141b.js"><link rel="prefetch" href="/blog/assets/js/85.00b63f10.js"><link rel="prefetch" href="/blog/assets/js/86.1581db60.js"><link rel="prefetch" href="/blog/assets/js/87.4c47bbc2.js"><link rel="prefetch" href="/blog/assets/js/88.10af48c1.js"><link rel="prefetch" href="/blog/assets/js/89.84840655.js"><link rel="prefetch" href="/blog/assets/js/9.c76e1545.js"><link rel="prefetch" href="/blog/assets/js/90.574990da.js"><link rel="prefetch" href="/blog/assets/js/91.a1094788.js"><link rel="prefetch" href="/blog/assets/js/92.7070acb6.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.389ed919.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/TB5.PNG" alt="Tang's Blog" class="logo"> <span class="site-name can-hide">Tang's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术笔记" class="dropdown-title"><span class="title">技术笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术笔记" class="mobile-dropdown-title"><span class="title">技术笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/java/" class="nav-link router-link-active">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/blog/frontend/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/blog/db/" class="nav-link">
  DB
</a></li><li class="dropdown-item"><!----> <a href="/blog/microservice/" class="nav-link">
  微服务
</a></li><li class="dropdown-item"><!----> <a href="/blog/distribution/" class="nav-link">
  分布式
</a></li><li class="dropdown-item"><!----> <a href="/blog/bigdata/" class="nav-link">
  大数据
</a></li><li class="dropdown-item"><!----> <a href="/blog/devops/" class="nav-link">
  DevOps
</a></li><li class="dropdown-item"><!----> <a href="/blog/newlanguage/" class="nav-link">
  新语言
</a></li><li class="dropdown-item"><!----> <a href="/blog/othertool/" class="nav-link">
  其他工具
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/readbook/" class="nav-link">
  读书分享
</a></li><li class="dropdown-item"><!----> <a href="/blog/guitar/" class="nav-link">
  吉他谱
</a></li><li class="dropdown-item"><!----> <a href="/blog/food/" class="nav-link">
  饮食
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术笔记" class="dropdown-title"><span class="title">技术笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术笔记" class="mobile-dropdown-title"><span class="title">技术笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/java/" class="nav-link router-link-active">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/blog/frontend/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/blog/db/" class="nav-link">
  DB
</a></li><li class="dropdown-item"><!----> <a href="/blog/microservice/" class="nav-link">
  微服务
</a></li><li class="dropdown-item"><!----> <a href="/blog/distribution/" class="nav-link">
  分布式
</a></li><li class="dropdown-item"><!----> <a href="/blog/bigdata/" class="nav-link">
  大数据
</a></li><li class="dropdown-item"><!----> <a href="/blog/devops/" class="nav-link">
  DevOps
</a></li><li class="dropdown-item"><!----> <a href="/blog/newlanguage/" class="nav-link">
  新语言
</a></li><li class="dropdown-item"><!----> <a href="/blog/othertool/" class="nav-link">
  其他工具
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/readbook/" class="nav-link">
  读书分享
</a></li><li class="dropdown-item"><!----> <a href="/blog/guitar/" class="nav-link">
  吉他谱
</a></li><li class="dropdown-item"><!----> <a href="/blog/food/" class="nav-link">
  饮食
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>新版本</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/java/newfeature/" aria-current="page" class="active sidebar-link">版本概览</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#新版本推陈出新" class="sidebar-link">新版本推陈出新</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#为什么是jdk17" class="sidebar-link">为什么是JDK17</a></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#jdk9新特性-2017年9月" class="sidebar-link">JDK9新特性（2017年9月）</a></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#jdk10新特性-2018年3月" class="sidebar-link">JDK10新特性（2018年3月）</a></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#jdk11新特性-2018年9月-lts版本" class="sidebar-link">JDK11新特性（2018年9月）（LTS版本）</a></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#jdk12新特性-2019年3月" class="sidebar-link">JDK12新特性（2019年3月）</a></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#jdk13新特性-2019年9月" class="sidebar-link">JDK13新特性（2019年9月）</a></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#jdk14新特性-2020年3月" class="sidebar-link">JDK14新特性（2020年3月）</a></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#jdk15新特性-2020年9月" class="sidebar-link">JDK15新特性（2020年9月）</a></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#jdk16新特性-2021年3月" class="sidebar-link">JDK16新特性（2021年3月）</a></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#jdk17新特性-2021年9月-lts版本" class="sidebar-link">JDK17新特性（2021年9月）（LTS版本）</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#重要特性" class="sidebar-link">重要特性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#java-模块化" class="sidebar-link">Java 模块化</a></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#http客户端api-响应式流实现的httpclient" class="sidebar-link">HTTP客户端API-响应式流实现的HttpClient</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#语法糖" class="sidebar-link">语法糖</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#本地变量类型推断" class="sidebar-link">本地变量类型推断</a></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#stream-api-改进" class="sidebar-link">Stream API 改进</a></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#switch表达式改进" class="sidebar-link">Switch表达式改进</a></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#文本块改进-jdk13" class="sidebar-link">文本块改进（jdk13）</a></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#instanceof-的模式匹配-jdk14出预览-jdk16最终确认" class="sidebar-link">instanceof 的模式匹配（jdk14出预览，jdk16最终确认）</a></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#record记录类-jdk16正式" class="sidebar-link">record记录类（jdk16正式）</a></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#更多的api" class="sidebar-link">更多的API</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#jvm" class="sidebar-link">JVM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#gc变化" class="sidebar-link">GC变化</a></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#指标测试" class="sidebar-link">指标测试</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/java/newfeature/#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/blog/java/newfeature/java8.html" class="sidebar-link">Java 8</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>设计模式</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/java/designmode/" class="sidebar-link">什么是设计模式</a></li><li><a href="/blog/java/designmode/singleton.html" class="sidebar-link">单例模式</a></li><li><a href="/blog/java/designmode/factory.html" class="sidebar-link">工厂模式</a></li><li><a href="/blog/java/designmode/buildermode.html" class="sidebar-link">建造者模式</a></li><li><a href="/blog/java/designmode/prototypemode.html" class="sidebar-link">原型模式</a></li><li><a href="/blog/java/designmode/adaptermode.html" class="sidebar-link">适配器模式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>多线程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/java/multithread/" class="sidebar-link">一级标题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JUC</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/java/juc/" class="sidebar-link">一级标题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JVM</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/java/jvm/" class="sidebar-link">双亲委派机制</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Spring</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>Spring</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/java/spring/spring/AOP1.html" class="sidebar-link">AOP</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="版本概览"><a href="#版本概览" class="header-anchor">#</a> 版本概览</h1> <h2 id="新版本推陈出新"><a href="#新版本推陈出新" class="header-anchor">#</a> 新版本推陈出新</h2> <div class="custom-block tip"><p class="custom-block-title">参考</p> <ul><li><p>[1] https://zhuanlan.zhihu.com/p/480293185</p></li> <li><p>[2] https://blog.oxings.com/article/31.html</p></li> <li><p>[3] https://blog.csdn.net/best_luxi/article/details/122543074</p></li></ul></div> <p>2022年Spring6和 SpringBoot3相继推出，在此之前，Java社区一直是&quot;新版任你发，我用Java 8&quot;，不管新版本怎么出，很少有人愿意升级。
这一次，Spring 直接来了个大招，SpringBoot3和Spring6的最低依赖就是JDK17！跨过 JDK 8-16，直接升级到 JDK 17。那么为什么是 JDK 17呢？</p> <h3 id="为什么是jdk17"><a href="#为什么是jdk17" class="header-anchor">#</a> 为什么是JDK17</h3> <p>这么多新版本的 JDK，而且2022年还会推出 JDK 18 和 JDK 19，为什么 Spring 选择了 JDK 17呢。</p> <p>主要是因为他是一个 Oracle官宣可以免费商用的LTS版本，所谓 LTS，是 Long Term Support，也就是官方保证会长期支持的版本。
<img src="/blog/java/java1.PNG" alt="java1"></p> <p>上面这张图是 Oracle 官方给出的 Oracle JDK 支持的时间线。可以看得到，JDK 17 最多可以支持到 2029 年 9 月份。按照技术更新迭代的速度，这次免费商用 8 年可谓是良苦用心，为的就是让使用者放心大胆地将 JDK 升级到 JDK 17(不过JDK 8 支持的时间更长，可以延长到 2030 年 12 月,JDK8可谓是YYDS！)</p> <p>从 JDK 诞生到现在，还在长期支持的版本主要有 JDK 7、JDK 8 、JDK 11以及 JDK 1，JDK 17 将是继 Java 8 以来最重要的LTS版本，是 Java 社区八年努力的成果。</p> <p>一直以来，Java8 都是 Java 社区心头的痛，Java8提供了很多特性，比如Lambda 表达式、Optional 类，加上Java8超长的支持时间，都导致了JDK8的使用至今。它代表着以稳定性为主的企业管理层与拥抱变化为主的程序猿之间的拉锯战。不升！成为各大厂心照不宣的选择。现在，这种平衡或将打破。因为 Java 届的霸主框架 SpringBoot，选择了最小支持的 Java lts 版本，就是最新的 Java17。
那么接下来，让我们看看，从JDK8到JDK17，Java 社区八年努力的成果有哪些？</p> <h3 id="jdk9新特性-2017年9月"><a href="#jdk9新特性-2017年9月" class="header-anchor">#</a> JDK9新特性（2017年9月）</h3> <ul><li><p>模块化</p></li> <li><p>提供了List.of()、Set.of()、Map.of()和Map.ofEntries()等工厂方法</p></li> <li><p>接口支持私有方法</p></li> <li><p>Optional 类改进</p></li> <li><p>多版本兼容Jar包</p></li> <li><p>JShell工具</p></li> <li><p>try-with-resources的改进</p></li> <li><p>Stream API的改进</p></li> <li><p>设置G1为JVM默认垃圾收集器</p></li> <li><p>支持http2.0和websocket的API</p></li></ul> <p><strong>重要特性：主要是API的优化，如支持HTTP2的Client API、JVM采用G1为默认垃圾收集器</strong></p> <h3 id="jdk10新特性-2018年3月"><a href="#jdk10新特性-2018年3月" class="header-anchor">#</a> JDK10新特性（2018年3月）</h3> <ul><li><p>局部变量类型推断，类似JS可以通过var来修饰局部变量，编译之后会推断出值的真实类型</p></li> <li><p>不可变集合的改进</p></li> <li><p>并行全垃圾回收器 G1，来优化G1的延迟</p></li> <li><p>线程本地握手，允许在不执行全局VM安全点的情况下执行线程回调，可以停止单个线程，而不需要停止所有线程或不停止线程</p></li> <li><p>Optional新增orElseThrow()方法</p></li> <li><p>类数据共享</p></li> <li><p>Unicode 语言标签扩展</p></li> <li><p>根证书</p></li></ul> <p><strong>重要特性：通过var关键字实现局部变量类型推断，使Java语言变成弱类型语言、JVM的G1垃圾回收由单线程改成多线程并行处理，降低G1的停顿时间。</strong></p> <h3 id="jdk11新特性-2018年9月-lts版本"><a href="#jdk11新特性-2018年9月-lts版本" class="header-anchor">#</a> JDK11新特性（2018年9月）（LTS版本）</h3> <ul><li><p>增加一些字符串处理方法</p></li> <li><p>用于 Lambda 参数的局部变量语法</p></li> <li><p>Http Client重写，支持HTTP/1.1和HTTP/2 ，也支持 websockets</p></li> <li><p>可运行单一Java源码文件，如：java Test.java</p></li> <li><p>ZGC：可伸缩低延迟垃圾收集器，ZGC可以看做是G1之上更细粒度的内存管理策略。由于内存的不断分配回收会产生大量的内存碎片空间，因此需要整理策略防止内存空间碎片化，在整理期间需要将对于内存引用的线程逻辑暂停，这个过程被称为&quot;Stop the world&quot;。只有当整理完成后，线程逻辑才可以继续运行。（并行回收）</p></li> <li><p>支持 TLS 1.3 协议</p></li> <li><p>Flight Recorder（飞行记录器），基于OS、JVM和JDK的事件产生的数据收集框架</p></li> <li><p>对Stream、Optional、集合API进行增强</p></li></ul> <p><strong>重要特性：对于JDK9和JDK10的完善，主要是对于Stream、集合等API的增强、新增ZGC垃圾收集器。</strong></p> <h3 id="jdk12新特性-2019年3月"><a href="#jdk12新特性-2019年3月" class="header-anchor">#</a> JDK12新特性（2019年3月）</h3> <ul><li><p>Switch 表达式扩展，可以有返回值</p></li> <li><p>新增NumberFormat对复杂数字的格式化</p></li> <li><p>字符串支持transform、indent操作</p></li> <li><p>新增方法Files.mismatch(Path, Path)</p></li> <li><p>Teeing Collector</p></li> <li><p>支持unicode 11</p></li> <li><p>Shenandoah GC，新增的GC算法</p></li> <li><p>G1收集器的优化，将GC的垃圾分为强制部分和可选部分，强制部分会被回收，可选部分可能不会被回收，提高GC的效率</p></li></ul> <p><strong>重要特性：switch表达式语法扩展、G1收集器优化、新增Shenandoah GC垃圾回收算法。</strong></p> <h3 id="jdk13新特性-2019年9月"><a href="#jdk13新特性-2019年9月" class="header-anchor">#</a> JDK13新特性（2019年9月）</h3> <ul><li><p>Switch 表达式扩展，switch表达式增加yield关键字用于返回结果，作用类似于return，如果没有返回结果则使用break</p></li> <li><p>文本块升级 &quot;&quot;&quot; ，引入了文本块，可以使用&quot;&quot;&quot;三个双引号表示文本块，文本块内部就不需要使用换行的转义字符</p></li> <li><p>SocketAPI 重构，Socket的底层实现优化，引入了NIO</p></li> <li><p>FileSystems.newFileSystem新方法</p></li> <li><p>ZGC优化，增强 ZGC 释放未使用内存，将标记长时间空闲的堆内存空间返还给操作系统，保证堆大小不会小于配置的最小堆内存大小，如果堆最大和最小内存大小设置一样，则不会释放内存还给操作系统</p></li></ul> <p><strong>重要特性：ZGC优化，释放内存还给操作系统、socket底层实现引入NIO。</strong></p> <h3 id="jdk14新特性-2020年3月"><a href="#jdk14新特性-2020年3月" class="header-anchor">#</a> JDK14新特性（2020年3月）</h3> <ul><li><p>instanceof模式匹配，instanceof类型匹配语法简化，可以直接给对象赋值，如if(obj instanceof String str),如果obj是字符串类型则直接赋值给了str变量</p></li> <li><p>引入Record类型，类似于Lombok 的@Data注解，可以向Lombok一样自动生成构造器、equals、getter等方法；</p></li> <li><p>Switch 表达式-标准化</p></li> <li><p>改进 NullPointerExceptions提示信息，打印具体哪个方法抛的空指针异常，避免同一行代码多个函数调用时无法判断具体是哪个函数抛异常的困扰，方便异常排查；</p></li> <li><p>删除 CMS 垃圾回收器</p></li></ul> <h3 id="jdk15新特性-2020年9月"><a href="#jdk15新特性-2020年9月" class="header-anchor">#</a> JDK15新特性（2020年9月）</h3> <ul><li><p>EdDSA 数字签名算法</p></li> <li><p>Sealed Classes（封闭类，预览），通过sealed关键字修饰抽象类限定只允许指定的子类才可以实现或继承抽象类，避免抽象类被滥用</p></li> <li><p>Hidden Classes（隐藏类）</p></li> <li><p>移除 Nashorn JavaScript引擎</p></li> <li><p>改进java.net.DatagramSocket 和 java.net.MulticastSocket底层实现</p></li></ul> <h3 id="jdk16新特性-2021年3月"><a href="#jdk16新特性-2021年3月" class="header-anchor">#</a> JDK16新特性（2021年3月）</h3> <ul><li><p>允许在 JDK C ++源代码中使用 C ++ 14功能</p></li> <li><p>ZGC性能优化，去掉ZGC线程堆栈处理从安全点到并发阶段</p></li> <li><p>增加 Unix 域套接字通道</p></li> <li><p>弹性元空间能力</p></li> <li><p>提供用于打包独立 Java 应用程序的 jpackage 工具</p></li></ul> <p><strong>JDK16相当于是将JDK14、JDK15的一些特性进行了正式引入，如instanceof模式匹配（Pattern matching）、record的引入等最终到JDK16变成了final版本。</strong></p> <h3 id="jdk17新特性-2021年9月-lts版本"><a href="#jdk17新特性-2021年9月-lts版本" class="header-anchor">#</a> JDK17新特性（2021年9月）（LTS版本）</h3> <ul><li><p>Free Java License</p></li> <li><p>JDK 17 将取代 JDK 11 成为下一个长期支持版本</p></li> <li><p>Spring 6 和 Spring Boot 3需要JDK17</p></li> <li><p>移除实验性的 AOT 和 JIT 编译器</p></li> <li><p>恢复始终执行严格模式 (Always-Strict) 的浮点定义</p></li> <li><p>正式引入密封类sealed class，限制抽象类的实现</p></li> <li><p>统一日志异步刷新，先将日志写入缓存，然后再异步刷新</p></li></ul> <p><strong>虽然JDK17也是一个LTS版本，但是并没有像JDK8和JDK11一样引入比较突出的特性，主要是对前几个版本的整合和完善。</strong></p> <h2 id="重要特性"><a href="#重要特性" class="header-anchor">#</a> 重要特性</h2> <h3 id="java-模块化"><a href="#java-模块化" class="header-anchor">#</a> Java 模块化</h3> <p>JPMS（Java Platform Module System）是Java 9发行版的核心亮点。它也被称为Jigshaw项目[1]。模块是新的结构，就像我们已经有包一样。使用新的模块化编程开发的应用程序可以看作是交互模块的集合，这些模块之间具有明确定义的边界和依赖关系。</p> <p>JPMS包括为编写模块化应用程序提供支持，以及将JDK源代码模块化。JDK 9 附带了大约 92 个模块（在 GA 版本中可以进行更改）。Java 9 Module System有一个&quot;java.base&quot;模块。它被称为基本模块。它是一个独立的模块，不依赖于任何其他模块。默认情况下，所有其他模块都依赖于&quot;java.base&quot;。</p> <p>在java模块化编程中：
一个模块通常只是一个 jar 文件，在根目录下有一个文件module-info.class。</p> <p>要使用模块，请将 jar 文件包含到modulepath而不是classpath. 添加到类路径的模块化 jar 文件是普通的 jar 文件，module-info.class文件将被忽略。</p> <p>典型的module-info.java类如下所示：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>module helloworld <span class="token punctuation">{</span>         exports com.alibaba.eight<span class="token punctuation">;</span> <span class="token punctuation">}</span> module <span class="token builtin class-name">test</span> <span class="token punctuation">{</span>         requires helloworld<span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>总结： <strong>模块化的目的，是让jdk的各个组件可以被分拆，复用和替换重写。</strong> 比如对java的gui不满意，可以自己实现一个gui，对java的语法不满意，可以把javac替换成其他语言和其他语言的编译器，比如kotlin和kotlinc等，没有模块化，几乎很难实现，每次修改某个模块，总不能把整个jdk给重新编译一遍，再发布一个整个sdk吧，模块化可以帮助更有效的定制化和部署</p> <h3 id="http客户端api-响应式流实现的httpclient"><a href="#http客户端api-响应式流实现的httpclient" class="header-anchor">#</a> HTTP客户端API-响应式流实现的HttpClient</h3> <p>Java 使用HttpURLConnection进行HTTP通信已经很长一段时间了。但随着时间的推移，要求变得越来越复杂，应用程序的要求也越来越高。在 Java 11 之前，开发人员不得不求助于功能丰富的库，如Apache HttpComponents或OkHttp等。
我们看到Java 9发布包含一个HttpClient实现作为实验性功能。它随着时间的推移而发展，现在是 Java 11 的最终功能。现在 Java 应用程序可以进行 HTTP 通信，而无需任何外部依赖。
作为JDK11中正式推出的新Http连接器，支持的功能还是比较新的，主要的特性有：
完整支持HTTP 2.0 或者HTTP 1.1</p> <p>支持 HTTPS/TLS</p> <p>有简单的阻塞使用方法</p> <p>支持异步发送，异步时间通知</p> <p>支持WebSocket</p> <p>支持响应式流</p> <p>HTTP2.0其他的客户端也能支持，而HttpClient使用CompletableFuture作为异步的返回数据。WebSocket的支持则是HttpClient的优势。响应式流的支持是HttpClient的一大优势。
HttpClient中的NIO模型、函数式编程、CompletableFuture异步回调、响应式流让HttpClient拥有极强的并发处理能力，所以其性能极高，而内存占用则更少。</p> <h2 id="语法糖"><a href="#语法糖" class="header-anchor">#</a> 语法糖</h2> <h3 id="本地变量类型推断"><a href="#本地变量类型推断" class="header-anchor">#</a> 本地变量类型推断</h3> <p>在Java 10之前版本中，我们想定义定义局部变量时。我们需要在赋值的左侧提供显式类型，并在赋值的右边提供实现类型：</p> <p>MyObject value = new MyObject();</p> <p>在Java 10中，提供了本地变量类型推断的功能，可以通过var声明变量：</p> <p>var value = new MyObject();</p> <p>本地变量类型推断将引入“var”关键字，而不需要显式的规范变量的类型。</p> <p>其实，所谓的本地变量类型推断，也是Java 10提供给开发者的语法糖。</p> <p>虽然我们在代码中使用var进行了定义，但是对于虚拟机来说他是不认识这个var的，在java文件编译成class文件的过程中，会进行解糖，使用变量真正的类型来替代var</p> <h3 id="stream-api-改进"><a href="#stream-api-改进" class="header-anchor">#</a> Stream API 改进</h3> <p>Collectors.teeing()</p> <p>teeing 收集器已公开为静态方法Collectors::teeing。该收集器将其输入转发给其他两个收集器，然后将它们的结果使用函数合并。</p> <p>示例：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span> 
    <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">&quot;唐一&quot;</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">&quot;唐二&quot;</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">&quot;唐三&quot;</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//平均分 总分</span>
<span class="token class-name">String</span> result <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">teeing</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">averagingInt</span><span class="token punctuation">(</span><span class="token class-name">Student</span><span class="token operator">::</span><span class="token function">getScore</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">summingInt</span><span class="token punctuation">(</span><span class="token class-name">Student</span><span class="token operator">::</span><span class="token function">getScore</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> s1 <span class="token operator">+</span> <span class="token string">&quot;:&quot;</span> <span class="token operator">+</span> s2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//最低分  最高分</span>
<span class="token class-name">String</span> result2 <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">teeing</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">minBy</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">comparing</span><span class="token punctuation">(</span><span class="token class-name">Student</span><span class="token operator">::</span><span class="token function">getScore</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">maxBy</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">comparing</span><span class="token punctuation">(</span><span class="token class-name">Student</span><span class="token operator">::</span><span class="token function">getScore</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> s1<span class="token punctuation">.</span><span class="token function">orElseThrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;:&quot;</span> <span class="token operator">+</span> s2<span class="token punctuation">.</span><span class="token function">orElseThrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>添加Stream.toList方法(jdk16)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//之前这样写</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> oneList <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token operator">::</span><span class="token function">parseInt</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//现在可以这样写</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> twoList <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token operator">::</span><span class="token function">parseInt</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="switch表达式改进"><a href="#switch表达式改进" class="header-anchor">#</a> Switch表达式改进</h3> <h4 id="支持箭头表达式-jdk12预览-jdk14标准"><a href="#支持箭头表达式-jdk12预览-jdk14标准" class="header-anchor">#</a> 支持箭头表达式（jdk12预览 jdk14标准）</h4> <p>此更改扩展了switch 语句以便它可以用作语句或表达式。不必为break每个 case 块定义一个语句，我们可以简单地使用箭头语法。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">boolean</span> isWeekend <span class="token operator">=</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>day<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token keyword">case</span> MONDAY<span class="token punctuation">,</span> TUESDAY<span class="token punctuation">,</span> WEDNESDAY<span class="token punctuation">,</span> THURSDAY<span class="token punctuation">,</span> FRIDAY <span class="token operator">-&gt;</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> SATURDAY<span class="token punctuation">,</span> SUNDAY <span class="token operator">-&gt;</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span> <span class="token operator">-&gt;</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token string">&quot;Illegal day entry :: &quot;</span> <span class="token operator">+</span> day<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> cn <span class="token operator">=</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token number">1</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;壹&quot;</span><span class="token punctuation">;</span>    
    <span class="token keyword">case</span> <span class="token number">2</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;贰&quot;</span><span class="token punctuation">;</span>    
    <span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;叁&quot;</span><span class="token punctuation">;</span>    
    <span class="token keyword">default</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;未知&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cn<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//要使用此预览功能，我们必须在应用程序启动期间使用–enable-preview标志明确指示 JVM。</span>
</code></pre></div><h4 id="yield关键字-jdk13"><a href="#yield关键字-jdk13" class="header-anchor">#</a> yield关键字（jdk13）</h4> <p>使用yield，我们现在可以有效地从 switch 表达式返回值，并能够更容易实现策略模式。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SwitchTest</span> <span class="token punctuation">{</span>    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        
        <span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>        
        <span class="token keyword">var</span> operation <span class="token operator">=</span> <span class="token string">&quot;平方&quot;</span><span class="token punctuation">;</span>        
        <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>operation<span class="token punctuation">)</span> <span class="token punctuation">{</span>            
            <span class="token keyword">case</span> <span class="token string">&quot;加倍&quot;</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>                
                <span class="token keyword">yield</span> me <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>           
                 <span class="token punctuation">}</span>            
            <span class="token keyword">case</span> <span class="token string">&quot;平方&quot;</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>                
                <span class="token keyword">yield</span> me <span class="token operator">*</span> me<span class="token punctuation">;</span>            
                <span class="token punctuation">}</span>            
            <span class="token keyword">default</span> <span class="token operator">-&gt;</span> me<span class="token punctuation">;</span>        
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>    
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="文本块改进-jdk13"><a href="#文本块改进-jdk13" class="header-anchor">#</a> 文本块改进（jdk13）</h3> <p>早些时候，为了在我们的代码中嵌入 JSON，我们将其声明为字符串文字：</p> <div class="language-json extra-class"><pre class="language-json"><code>String json  = <span class="token string">&quot;{\r\n&quot;</span> + <span class="token string">&quot;\&quot;name\&quot; : \&quot;lingli\&quot;,\r\n&quot;</span> + <span class="token string">&quot;\&quot;website\&quot; : \&quot;https://www.alibaba.com/\&quot;\r\n&quot;</span> + <span class="token string">&quot;}&quot;</span>;
</code></pre></div><p>现在让我们使用字符串文本块编写相同的 JSON ：</p> <div class="language-json extra-class"><pre class="language-json"><code>String json = <span class="token string">&quot;&quot;</span>&quot; <span class="token punctuation">{</span>         
    <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Baeldung&quot;</span><span class="token punctuation">,</span>         
    <span class="token property">&quot;website&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;https://www.alibaba.com/&quot;</span><span class="token punctuation">}</span><span class="token string">&quot;&quot;</span>&quot;;
</code></pre></div><p>很明显，不需要转义双引号或添加回车。通过使用文本块，嵌入的 JSON 更易于编写，更易于阅读和维护。</p> <h3 id="instanceof-的模式匹配-jdk14出预览-jdk16最终确认"><a href="#instanceof-的模式匹配-jdk14出预览-jdk16最终确认" class="header-anchor">#</a> instanceof 的模式匹配（jdk14出预览，jdk16最终确认）</h3> <p>之前：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Object</span> obj <span class="token operator">=</span> <span class="token string">&quot;大阳&quot;</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">String</span> t <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> obj<span class="token punctuation">;</span>    <span class="token comment">// TODO}</span>
</code></pre></div><p>现在：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Object</span> obj <span class="token operator">=</span> <span class="token string">&quot;大阳&quot;</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">String</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// TODO 此时t已经是String类型了}</span>
</code></pre></div><h3 id="record记录类-jdk16正式"><a href="#record记录类-jdk16正式" class="header-anchor">#</a> record记录类（jdk16正式）</h3> <p>传统的Java应用程序通过创建一个类，通过该类的构造方法实例化类，并通过getter和setter方法访问成员变量或者设置成员变量的值。有了record关键字，你的代码会变得更加简洁。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/** * record 记录类 * 你也可以覆写equals() hashCode() toString()方法，不用写get、set了 * @author DAYANG */</span>

<span class="token keyword">record</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        
    <span class="token annotation punctuation">@Override</span>    
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        
        <span class="token keyword">return</span> <span class="token string">&quot;User[&quot;</span> <span class="token operator">+</span>                
        <span class="token string">&quot;name='&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                
        <span class="token string">&quot;, age=&quot;</span> <span class="token operator">+</span> age <span class="token operator">+</span>                
        <span class="token string">']'</span><span class="token punctuation">;</span>    
        <span class="token punctuation">}</span>    
        
        <span class="token annotation punctuation">@Override</span>   
         <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>        
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    
            <span class="token punctuation">}</span>    
        <span class="token annotation punctuation">@Override</span>    
        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    
            <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="更多的api"><a href="#更多的api" class="header-anchor">#</a> 更多的API</h3> <p>isBlank()：如果字符串为空或字符串仅包含空格（包括制表符），则返回 true。注意与isEmpty() 不同，isEmpty()仅在长度为 0 时返回 true。</p> <p>lines()：将字符串拆分为字符串流，每个字符串包含一行。</p> <p>strip() ：分别从开头和结尾；</p> <p>stripLeading()/stripTrailing()仅开始和仅结束删除空格。</p> <p>repeat(int times)：返回一个字符串，该字符串采用原始字符串并按指定的次数重复该字符串。</p> <p>readString()：允许从文件路径直接读取到字符串。</p> <p>writeString(Path path)：将字符串直接写入指定路径处的文件。</p> <p>indent(int level)：缩进字符串的指定量。负值只会影响前导空格。</p> <p>transform(Function f)：将给定的 lambda 应用于字符串。</p> <h2 id="jvm"><a href="#jvm" class="header-anchor">#</a> JVM</h2> <h3 id="gc变化"><a href="#gc变化" class="header-anchor">#</a> GC变化</h3> <p>JDK9: 设置G1为JVM默认垃圾收集器</p> <p>JDK10：并行全垃圾回收器 G1，通过并行Full GC, 改善G1的延迟。目前对G1的full GC的实现采用了单线程-清除-压缩算法。JDK10开始使用并行化-清除-压缩算法。</p> <p>JDK11：推出ZGC新一代垃圾回收器（实验性）,目标是GC暂停时间不会超过10ms，既能处理几百兆的小堆，也能处理几个T的大堆。</p> <p>JDK14 ：删除CMS垃圾回收器;弃用 ParallelScavenge + SerialOld GC 的垃圾回收算法组合;将 zgc 垃圾回收器移植到 macOS 和 windows 平台</p> <p>JDk 15 : ZGC (JEP 377) 和Shenandoah (JEP 379) 不再是实验性功能。默认的 GC 仍然是G1。</p> <p>JDK16：增强ZGC，ZGC获得了 46个增强功能 和25个错误修复，控制stw时间不超过10毫秒</p> <h3 id="指标测试"><a href="#指标测试" class="header-anchor">#</a> 指标测试</h3> <h4 id="吞吐量比较"><a href="#吞吐量比较" class="header-anchor">#</a> 吞吐量比较</h4> <p><img src="/blog/java/java2.PNG" alt="java2"></p> <p>在吞吐量方面，Parallel 中 JDK 8 和 JDK 11 差距不大，JDK 17 相较 JDK 8 提升 15% 左右；G1 中 JDK 17 比 JDK 8 提升 18%；ZGC 在 JDK 11[2]引入，JDK 17 对比JDK 11 提升超过 20%。</p> <h4 id="延迟比较"><a href="#延迟比较" class="header-anchor">#</a> 延迟比较</h4> <p><img src="/blog/java/java3.PNG" alt="java3"></p> <p>在 GC 延迟方面，JDK 17 的提升更为明显。我们可以看到为缩短 GC 暂停时间所做的努力都得到了回报,很多提升都是因为 GC 的改进。
在 Parallel 中 JDK 17 对比 JDK 8 和JDK 11 提升 40%；在 G1 中，JDK 11 对比 JDK 8 提升 26%，JDK 17 对比 JDK 8 提升接近 60%！ZGC 中 JDK 17 对比 JDK 11 提升超过 40%。</p> <h4 id="暂停时间对比"><a href="#暂停时间对比" class="header-anchor">#</a> 暂停时间对比</h4> <p><img src="/blog/java/java4.PNG" alt="java4"></p> <p>我们可以看到JDK 17 中的 ZGC 远低于目标：亚毫秒级的暂停时间。G1 的目标是在延迟和吞吐量之间保持平衡，远低于其默认的目标：200 毫秒的暂停时间。ZGC 的设计会保证暂停时间不随堆的大小而改变，我们可以清楚地看到当堆扩大到 128GB 时的情况。从暂停时间的角度来看，G1比Parallel 更善于处理更大的堆，因为它能够保证暂停时间满足特定目标。</p> <h4 id="资源占用"><a href="#资源占用" class="header-anchor">#</a> 资源占用</h4> <p><img src="/blog/java/java5.PNG" alt="java5"></p> <p>上图比较了三个不同收集器原生内存的使用峰值。由于从这个角度来看 Parallel 和 ZGC 都非常稳定，因此我们应该看一看原始数字。我们可以看到 G1 在这方面确实有所改进，主要原因是所有功能和增强功能都提高了记忆集管理的效率 。</p> <p>总结：无论使用哪种收集器，与旧版本相比，JDK 17 [3]的整体性能都有很大的提升。在 JDK 8 中，Parallel是默认设置，但在 JDK 9 中改为了 G1。从那以后，G1 的改进速度就超过了 Parallel，但在有些情况下可能 Parallel 仍然是最佳选择。而 ZGC（JDK 15 正式使用）的加入，成为了第三种高性能替代方案。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <ol><li><p>Spring带头猛冲，直接上JDK17。如果Spring6还支持Java8的话，那很多技术框架都要跟着Java8的兼容，与其这样不如由Spring带头，一起飞升Java17，不过有些框架还不支持JDK17。</p></li> <li><p>性能升级，光从java8换到java11，啥也没干性能直接就提升了10%（nio底层的重写），更何况一路到jdk17过程中的JVM相关优化。不过光是性能的优化还不足以吸引企业进行JDK升级，毕竟加机器就能解决，费不着各种升级改造，还可能有安全问题。</p></li> <li><p>JDK21可能成为真正的经典版本。目前还没有Project loom功能，代表着没有协程，性能方面比有协程jdk差远了。比如阿里开源的jdk8,11,就有非侵入式协程。</p></li></ol> <p>从发展趋势看，Project loom功能在JDK19已经可预览了，可以发现该版本许多的java工具都开始针对loom进行升级，Project loom大概在JDK21进行正式推出，而JDK21又是一个长期支持版本 (LTS) ，值得期待。</p> <p>各种servlet容器，还有jetty，netty，vert.x等，在它们最新版本的release note找到对应的升级标注，说，我们添加了某某支持，其中最重要的就是loom，或者叫做虚拟线程的支持, 可以预见一旦JDK21发行，很多软件都会跟上投入生产.
Project loom参考：https://open.atatech.org/articles/249741</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/5/2023, 4:38:02 PM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/blog/java/newfeature/java8.html">
        Java 8
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.96a63ad2.js" defer></script><script src="/blog/assets/js/2.e671b9b2.js" defer></script><script src="/blog/assets/js/3.be9bea65.js" defer></script><script src="/blog/assets/js/72.04308961.js" defer></script>
  </body>
</html>
